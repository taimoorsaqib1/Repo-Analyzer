/* ── Reset & Variables ──────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:       #0d1117;
  --surface:  #161b22;
  --card:     #21262d;
  --border:   #30363d;
  --accent:   #58a6ff;
  --accent2:  #3fb950;
  --danger:   #f85149;
  --text:     #e6edf3;
  --muted:    #8b949e;
  --radius:   8px;
  --sidebar:  280px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

body {
  background: var(--bg);
  color: var(--text);
  height: 100vh;
  overflow: hidden;
}

/* ── Layout ─────────────────────────────────────────────── */
.app {
  display: flex;
  height: 100vh;
}

/* ── Sidebar ────────────────────────────────────────────── */
.sidebar {
  width: var(--sidebar);
  min-width: var(--sidebar);
  background: var(--surface);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  padding: 20px 16px;
  gap: 24px;
  overflow-y: auto;
}

.logo {
  display: flex;
  align-items: center;
  gap: 12px;
}
.logo-icon { font-size: 28px; }
.logo h1   { font-size: 16px; font-weight: 700; color: var(--text); }
.logo-sub  { font-size: 11px; color: var(--muted); }

.sidebar-section {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.section-label {
  font-size: 10px;
  font-weight: 600;
  letter-spacing: .08em;
  color: var(--muted);
  text-transform: uppercase;
}

/* URL inputs */
.url-list { display: flex; flex-direction: column; gap: 6px; }

.url-item {
  display: flex;
  gap: 6px;
}

.url-item input {
  flex: 1;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text);
  font-size: 12px;
  padding: 7px 10px;
  outline: none;
  transition: border-color .15s;
}
.url-item input:focus { border-color: var(--accent); }

.btn-remove {
  background: transparent;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--muted);
  font-size: 16px;
  line-height: 1;
  padding: 0 8px;
  cursor: pointer;
  transition: color .15s, border-color .15s;
}
.btn-remove:hover { color: var(--danger); border-color: var(--danger); }

/* Branch row */
.branch-row {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: var(--muted);
}
.branch-input {
  flex: 1;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text);
  font-size: 12px;
  padding: 5px 8px;
  outline: none;
}
.branch-input:focus { border-color: var(--accent); }

/* Buttons */
.btn-primary {
  background: var(--accent);
  color: #0d1117;
  border: none;
  border-radius: var(--radius);
  font-weight: 600;
  font-size: 13px;
  padding: 9px 14px;
  cursor: pointer;
  transition: opacity .15s;
  width: 100%;
}
.btn-primary:hover   { opacity: .85; }
.btn-primary:disabled { opacity: .4; cursor: not-allowed; }

.btn-ghost {
  background: transparent;
  border: 1px dashed var(--border);
  border-radius: var(--radius);
  color: var(--muted);
  font-size: 12px;
  padding: 7px 12px;
  cursor: pointer;
  transition: color .15s, border-color .15s;
}
.btn-ghost:hover { color: var(--text); border-color: var(--accent); }

.btn-danger {
  background: transparent;
  border: 1px solid var(--danger);
  border-radius: var(--radius);
  color: var(--danger);
  font-size: 12px;
  padding: 7px 12px;
  cursor: pointer;
  transition: background .15s;
  width: 100%;
}
.btn-danger:hover { background: rgba(248,81,73,.12); }

/* Indexed list */
.indexed-list { display: flex; flex-direction: column; gap: 6px; }

.indexed-item {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 8px 10px;
  font-size: 12px;
}
.indexed-item .repo-name { font-weight: 600; color: var(--accent); }
.indexed-item .repo-meta { color: var(--muted); margin-top: 2px; font-size: 11px; }

/* ── Main ───────────────────────────────────────────────── */
.main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
}

/* Centered states */
.center-state {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 40px;
  text-align: center;
  color: var(--muted);
}
.center-state h2 { color: var(--text); font-size: 20px; }
.center-state p  { max-width: 420px; line-height: 1.6; }
.empty-icon { font-size: 56px; }

/* Spinner */
.spinner {
  width: 40px; height: 40px;
  border: 3px solid var(--border);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin .7s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

.progress-log {
  margin-top: 12px;
  max-height: 240px;
  overflow-y: auto;
  width: 100%;
  max-width: 560px;
  text-align: left;
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.progress-line {
  font-size: 13px;
  color: var(--muted);
  padding: 3px 0;
  border-bottom: 1px solid var(--border);
}
.progress-line.ok  { color: var(--accent2); }
.progress-line.err { color: var(--danger); }

/* ── Content Area ───────────────────────────────────────── */
.content-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.hidden { display: none !important; }

/* Tabs */
.tabs {
  display: flex;
  gap: 4px;
  padding: 12px 20px 0;
  border-bottom: 1px solid var(--border);
  background: var(--surface);
}
.tab {
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--muted);
  font-size: 13px;
  font-weight: 500;
  padding: 8px 16px;
  cursor: pointer;
  transition: color .15s, border-color .15s;
  margin-bottom: -1px;
}
.tab:hover { color: var(--text); }
.tab.active { color: var(--accent); border-bottom-color: var(--accent); }

/* Tab panes */
.tab-pane {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

/* ── Repo Cards ─────────────────────────────────────────── */
.repo-cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
  gap: 16px;
}

.repo-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.card-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 8px;
}
.card-title { font-size: 16px; font-weight: 700; color: var(--accent); }
.card-link  { font-size: 11px; color: var(--muted); text-decoration: none; }
.card-link:hover { color: var(--accent); }

.card-overview { font-size: 13px; color: var(--text); line-height: 1.6; }

.card-section-title {
  font-size: 10px;
  font-weight: 600;
  letter-spacing: .07em;
  color: var(--muted);
  text-transform: uppercase;
  margin-bottom: 6px;
}

.features-list {
  display: flex;
  flex-direction: column;
  gap: 5px;
}
.feature-item {
  display: flex;
  gap: 8px;
  font-size: 12px;
  color: var(--text);
  align-items: flex-start;
}

.tech-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}
.tech-tag {
  background: rgba(88,166,255,.1);
  border: 1px solid rgba(88,166,255,.25);
  border-radius: 20px;
  color: var(--accent);
  font-size: 11px;
  padding: 3px 9px;
}

.lang-tags { display: flex; flex-wrap: wrap; gap: 5px; }
.lang-tag {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 20px;
  font-size: 11px;
  color: var(--muted);
  padding: 2px 8px;
}
.lang-count { color: var(--text); font-weight: 600; }

.card-purpose {
  font-size: 13px;
  color: var(--accent2);
  font-weight: 500;
  background: rgba(63,185,80,.08);
  border: 1px solid rgba(63,185,80,.2);
  border-radius: var(--radius);
  padding: 8px 12px;
}

.card-arch {
  font-size: 12px;
  color: var(--muted);
  line-height: 1.5;
  border-left: 3px solid var(--border);
  padding-left: 10px;
  font-style: italic;
}

.card-getting-started {
  font-size: 12px;
  color: var(--text);
  line-height: 1.6;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 10px 12px;
  white-space: pre-wrap;
}

.dep-tag {
  background: rgba(210,153,34,.1);
  border: 1px solid rgba(210,153,34,.25);
  border-radius: 20px;
  color: #d2993a;
  font-size: 11px;
  padding: 3px 9px;
}

.features-list.limitations .feature-item { color: var(--muted); }
.features-list.limitations .fi-icon      { color: #e3b341; }

.fi-icon {
  flex-shrink: 0;
  margin-top: 1px;
  margin-right: 0;
  min-width: 16px;
}

.card-stats {
  display: flex;
  gap: 16px;
  font-size: 12px;
  color: var(--muted);
  padding-top: 4px;
  border-top: 1px solid var(--border);
}
.stat-val { color: var(--text); font-weight: 600; }

/* ── Chat ───────────────────────────────────────────────── */
#tab-chat {
  display: flex;
  flex-direction: column;
  padding: 0;
}

.messages {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.msg {
  display: flex;
  flex-direction: column;
  gap: 4px;
  max-width: 780px;
}
.msg.user  { align-self: flex-end; }
.msg.bot   { align-self: flex-start; }

.msg-label {
  font-size: 10px;
  font-weight: 600;
  letter-spacing: .06em;
  text-transform: uppercase;
  color: var(--muted);
  padding: 0 4px;
}

.msg-bubble {
  border-radius: 10px;
  padding: 12px 16px;
  font-size: 14px;
  line-height: 1.65;
  white-space: pre-wrap;
  word-break: break-word;
}
.msg.user .msg-bubble {
  background: rgba(88,166,255,.15);
  border: 1px solid rgba(88,166,255,.25);
  color: var(--text);
}
.msg.bot .msg-bubble {
  background: var(--card);
  border: 1px solid var(--border);
  color: var(--text);
}

.msg-sources {
  font-size: 11px;
  color: var(--muted);
  padding: 0 4px;
}
.msg-sources span { color: var(--accent); }

/* Cursor blink */
.cursor { display: inline-block; animation: blink 1s step-end infinite; }
@keyframes blink { 50% { opacity: 0; } }

/* Chat bar */
.chat-bar {
  display: flex;
  gap: 10px;
  padding: 14px 20px;
  border-top: 1px solid var(--border);
  background: var(--surface);
}
.chat-bar input {
  flex: 1;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text);
  font-size: 14px;
  padding: 10px 14px;
  outline: none;
  transition: border-color .15s;
}
.chat-bar input:focus { border-color: var(--accent); }

#sendBtn {
  background: var(--accent);
  color: #0d1117;
  border: none;
  border-radius: var(--radius);
  font-weight: 600;
  font-size: 13px;
  padding: 10px 20px;
  cursor: pointer;
  transition: opacity .15s;
}
#sendBtn:hover    { opacity: .85; }
#sendBtn:disabled { opacity: .4; cursor: not-allowed; }

/* Scrollbar */
::-webkit-scrollbar       { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
